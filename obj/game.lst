                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.5.0 #9253 (Sep 26 2015) (Linux)
                              4 ; This file was generated Mon Oct  5 21:06:19 2015
                              5 ;--------------------------------------------------------
                              6 	.module game
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _drawAll
                             13 	.globl _cpct_waitVSYNC
                             14 	.globl _cpct_drawSolidBox
                             15 	.globl _cpct_drawSpriteMasked
                             16 	.globl _cpct_px2byteM1
                             17 	.globl _cpct_isKeyPressed
                             18 	.globl _cpct_scanKeyboard_f
                             19 	.globl _pvideomem
                             20 	.globl _character
                             21 	.globl _initializeGameScreen
                             22 	.globl _updateUser
                             23 	.globl _game
                             24 ;--------------------------------------------------------
                             25 ; special function registers
                             26 ;--------------------------------------------------------
                             27 ;--------------------------------------------------------
                             28 ; ram data
                             29 ;--------------------------------------------------------
                             30 	.area _DATA
   0000                      31 _character::
   0000                      32 	.ds 4
   0004                      33 _pvideomem::
   0004                      34 	.ds 2
                             35 ;--------------------------------------------------------
                             36 ; ram data
                             37 ;--------------------------------------------------------
                             38 	.area _INITIALIZED
                             39 ;--------------------------------------------------------
                             40 ; absolute external ram data
                             41 ;--------------------------------------------------------
                             42 	.area _DABS (ABS)
                             43 ;--------------------------------------------------------
                             44 ; global & static initialisations
                             45 ;--------------------------------------------------------
                             46 	.area _HOME
                             47 	.area _GSINIT
                             48 	.area _GSFINAL
                             49 	.area _GSINIT
                             50 ;--------------------------------------------------------
                             51 ; Home
                             52 ;--------------------------------------------------------
                             53 	.area _HOME
                             54 	.area _HOME
                             55 ;--------------------------------------------------------
                             56 ; code
                             57 ;--------------------------------------------------------
                             58 	.area _CODE
                             59 ;src/game.c:23: void initializeGameScreen() {
                             60 ;	---------------------------------
                             61 ; Function initializeGameScreen
                             62 ; ---------------------------------
   0000                      63 _initializeGameScreen::
                             64 ;src/game.c:25: cpct_drawSolidBox(INIT_VMEM, cpct_px2byteM1(1, 1, 1, 1), 64, 200);
   0000 21 01 01      [10]   65 	ld	hl,#0x0101
   0003 E5            [11]   66 	push	hl
   0004 2E 01         [ 7]   67 	ld	l, #0x01
   0006 E5            [11]   68 	push	hl
   0007 CDr00r00      [17]   69 	call	_cpct_px2byteM1
   000A F1            [10]   70 	pop	af
   000B F1            [10]   71 	pop	af
   000C 55            [ 4]   72 	ld	d,l
   000D 21 40 C8      [10]   73 	ld	hl,#0xC840
   0010 E5            [11]   74 	push	hl
   0011 D5            [11]   75 	push	de
   0012 33            [ 6]   76 	inc	sp
   0013 21 00 C0      [10]   77 	ld	hl,#0xC000
   0016 E5            [11]   78 	push	hl
   0017 CDr00r00      [17]   79 	call	_cpct_drawSolidBox
   001A F1            [10]   80 	pop	af
   001B F1            [10]   81 	pop	af
   001C 33            [ 6]   82 	inc	sp
                             83 ;src/game.c:26: cpct_drawSolidBox(INIT_VMEM + 64, cpct_px2byteM1(1, 1, 1, 1), 16, 200);
   001D 21 01 01      [10]   84 	ld	hl,#0x0101
   0020 E5            [11]   85 	push	hl
   0021 2E 01         [ 7]   86 	ld	l, #0x01
   0023 E5            [11]   87 	push	hl
   0024 CDr00r00      [17]   88 	call	_cpct_px2byteM1
   0027 F1            [10]   89 	pop	af
   0028 F1            [10]   90 	pop	af
   0029 55            [ 4]   91 	ld	d,l
   002A 21 10 C8      [10]   92 	ld	hl,#0xC810
   002D E5            [11]   93 	push	hl
   002E D5            [11]   94 	push	de
   002F 33            [ 6]   95 	inc	sp
   0030 21 40 C0      [10]   96 	ld	hl,#0xC040
   0033 E5            [11]   97 	push	hl
   0034 CDr00r00      [17]   98 	call	_cpct_drawSolidBox
   0037 F1            [10]   99 	pop	af
   0038 F1            [10]  100 	pop	af
   0039 33            [ 6]  101 	inc	sp
   003A C9            [10]  102 	ret
                            103 ;src/game.c:29: void updateUser() {
                            104 ;	---------------------------------
                            105 ; Function updateUser
                            106 ; ---------------------------------
   003B                     107 _updateUser::
                            108 ;src/game.c:32: x = &(character.pe->de->e->c->x);
   003B 2Ar00r00      [16]  109 	ld	hl, (#_character + 0)
   003E 7E            [ 7]  110 	ld	a, (hl)
   003F 23            [ 6]  111 	inc	hl
   0040 66            [ 7]  112 	ld	h,(hl)
   0041 6F            [ 4]  113 	ld	l,a
   0042 7E            [ 7]  114 	ld	a, (hl)
   0043 23            [ 6]  115 	inc	hl
   0044 66            [ 7]  116 	ld	h,(hl)
   0045 6F            [ 4]  117 	ld	l,a
   0046 11 04 00      [10]  118 	ld	de, #0x0004
   0049 19            [11]  119 	add	hl, de
   004A 5E            [ 7]  120 	ld	e,(hl)
   004B 23            [ 6]  121 	inc	hl
   004C 56            [ 7]  122 	ld	d,(hl)
                            123 ;src/game.c:35: cpct_scanKeyboard_f();
   004D D5            [11]  124 	push	de
   004E CDr00r00      [17]  125 	call	_cpct_scanKeyboard_f
   0051 21 00 02      [10]  126 	ld	hl,#0x0200
   0054 CDr00r00      [17]  127 	call	_cpct_isKeyPressed
   0057 7D            [ 4]  128 	ld	a,l
   0058 D1            [10]  129 	pop	de
   0059 B7            [ 4]  130 	or	a, a
   005A 28 13         [12]  131 	jr	Z,00105$
   005C 1A            [ 7]  132 	ld	a,(de)
   005D 67            [ 4]  133 	ld	h,a
   005E D6 4C         [ 7]  134 	sub	a, #0x4C
   0060 30 0D         [12]  135 	jr	NC,00105$
   0062 7C            [ 4]  136 	ld	a,h
   0063 3C            [ 4]  137 	inc	a
   0064 12            [ 7]  138 	ld	(de),a
   0065 21r04r00      [10]  139 	ld	hl, #_pvideomem+0
   0068 34            [11]  140 	inc	(hl)
   0069 C0            [11]  141 	ret	NZ
   006A 21r05r00      [10]  142 	ld	hl, #_pvideomem+1
   006D 34            [11]  143 	inc	(hl)
   006E C9            [10]  144 	ret
   006F                     145 00105$:
                            146 ;src/game.c:37: else if (cpct_isKeyPressed(Key_CursorLeft)  && (*x) >   0        ) { --(*x); --pvideomem; }
   006F D5            [11]  147 	push	de
   0070 21 01 01      [10]  148 	ld	hl,#0x0101
   0073 CDr00r00      [17]  149 	call	_cpct_isKeyPressed
   0076 7D            [ 4]  150 	ld	a,l
   0077 D1            [10]  151 	pop	de
   0078 B7            [ 4]  152 	or	a, a
   0079 C8            [11]  153 	ret	Z
   007A 1A            [ 7]  154 	ld	a,(de)
   007B B7            [ 4]  155 	or	a, a
   007C C8            [11]  156 	ret	Z
   007D C6 FF         [ 7]  157 	add	a,#0xFF
   007F 12            [ 7]  158 	ld	(de),a
   0080 2Ar04r00      [16]  159 	ld	hl,(_pvideomem)
   0083 2B            [ 6]  160 	dec	hl
   0084 22r04r00      [16]  161 	ld	(_pvideomem),hl
   0087 C9            [10]  162 	ret
                            163 ;src/game.c:47: void drawAll(){
                            164 ;	---------------------------------
                            165 ; Function drawAll
                            166 ; ---------------------------------
   0088                     167 _drawAll::
                            168 ;src/game.c:49: cpct_drawSpriteMasked(character.pe->de->e->sprite, pvideomem, SPR_W, SPR_H);
   0088 ED 4Br04r00   [20]  169 	ld	bc,(_pvideomem)
   008C 2Ar00r00      [16]  170 	ld	hl, (#_character + 0)
   008F 7E            [ 7]  171 	ld	a, (hl)
   0090 23            [ 6]  172 	inc	hl
   0091 66            [ 7]  173 	ld	h,(hl)
   0092 6F            [ 4]  174 	ld	l,a
   0093 7E            [ 7]  175 	ld	a, (hl)
   0094 23            [ 6]  176 	inc	hl
   0095 66            [ 7]  177 	ld	h,(hl)
   0096 6F            [ 4]  178 	ld	l,a
   0097 23            [ 6]  179 	inc	hl
   0098 23            [ 6]  180 	inc	hl
   0099 5E            [ 7]  181 	ld	e,(hl)
   009A 23            [ 6]  182 	inc	hl
   009B 56            [ 7]  183 	ld	d,(hl)
   009C 21 04 10      [10]  184 	ld	hl,#0x1004
   009F E5            [11]  185 	push	hl
   00A0 C5            [11]  186 	push	bc
   00A1 D5            [11]  187 	push	de
   00A2 CDr00r00      [17]  188 	call	_cpct_drawSpriteMasked
   00A5 C9            [10]  189 	ret
                            190 ;src/game.c:52: void game() {
                            191 ;	---------------------------------
                            192 ; Function game
                            193 ; ---------------------------------
   00A6                     194 _game::
                            195 ;src/game.c:54: character.lifes = 1;   
   00A6 21r02r00      [10]  196 	ld	hl,#(_character + 0x0002)
   00A9 36 01         [10]  197 	ld	(hl),#0x01
                            198 ;src/game.c:55: character.pe->de->e->c->x = 0;
   00AB 2Ar00r00      [16]  199 	ld	hl, (#_character + 0)
   00AE 7E            [ 7]  200 	ld	a, (hl)
   00AF 23            [ 6]  201 	inc	hl
   00B0 66            [ 7]  202 	ld	h,(hl)
   00B1 6F            [ 4]  203 	ld	l,a
   00B2 7E            [ 7]  204 	ld	a, (hl)
   00B3 23            [ 6]  205 	inc	hl
   00B4 66            [ 7]  206 	ld	h,(hl)
   00B5 6F            [ 4]  207 	ld	l,a
   00B6 11 04 00      [10]  208 	ld	de, #0x0004
   00B9 19            [11]  209 	add	hl, de
   00BA 5E            [ 7]  210 	ld	e,(hl)
   00BB 23            [ 6]  211 	inc	hl
   00BC 56            [ 7]  212 	ld	d,(hl)
   00BD AF            [ 4]  213 	xor	a, a
   00BE 12            [ 7]  214 	ld	(de),a
                            215 ;src/game.c:56: character.pe->de->e->c->y = 0;
   00BF 2Ar00r00      [16]  216 	ld	hl, (#_character + 0)
   00C2 7E            [ 7]  217 	ld	a, (hl)
   00C3 23            [ 6]  218 	inc	hl
   00C4 66            [ 7]  219 	ld	h,(hl)
   00C5 6F            [ 4]  220 	ld	l,a
   00C6 7E            [ 7]  221 	ld	a, (hl)
   00C7 23            [ 6]  222 	inc	hl
   00C8 66            [ 7]  223 	ld	h,(hl)
   00C9 6F            [ 4]  224 	ld	l,a
   00CA 11 04 00      [10]  225 	ld	de, #0x0004
   00CD 19            [11]  226 	add	hl, de
   00CE 5E            [ 7]  227 	ld	e,(hl)
   00CF 23            [ 6]  228 	inc	hl
   00D0 56            [ 7]  229 	ld	d,(hl)
   00D1 13            [ 6]  230 	inc	de
   00D2 AF            [ 4]  231 	xor	a, a
   00D3 12            [ 7]  232 	ld	(de),a
                            233 ;src/game.c:57: character.pe->de->e->sprite = g_character;
   00D4 2Ar00r00      [16]  234 	ld	hl, (#_character + 0)
   00D7 7E            [ 7]  235 	ld	a, (hl)
   00D8 23            [ 6]  236 	inc	hl
   00D9 66            [ 7]  237 	ld	h,(hl)
   00DA 6F            [ 4]  238 	ld	l,a
   00DB 5E            [ 7]  239 	ld	e,(hl)
   00DC 23            [ 6]  240 	inc	hl
   00DD 56            [ 7]  241 	ld	d,(hl)
   00DE 13            [ 6]  242 	inc	de
   00DF 13            [ 6]  243 	inc	de
   00E0 6B            [ 4]  244 	ld	l,e
   00E1 01r00r00      [10]  245 	ld	bc,#_g_character+0
   00E4 62            [ 4]  246 	ld	h, d
   00E5 71            [ 7]  247 	ld	(hl),c
   00E6 23            [ 6]  248 	inc	hl
   00E7 70            [ 7]  249 	ld	(hl),b
                            250 ;src/game.c:59: pvideomem = INIT_VMEM; 
   00E8 21 00 C0      [10]  251 	ld	hl,#0xC000
   00EB 22r04r00      [16]  252 	ld	(_pvideomem),hl
                            253 ;src/game.c:61: initializeGameScreen();   // Set up Game Screen
   00EE CDr00r00      [17]  254 	call	_initializeGameScreen
                            255 ;src/game.c:66: while(character.lifes > 0) {      
   00F1                     256 00101$:
   00F1 3Ar02r00      [13]  257 	ld	a, (#(_character + 0x0002) + 0)
   00F4 B7            [ 4]  258 	or	a, a
   00F5 C8            [11]  259 	ret	Z
                            260 ;src/game.c:67: cpct_waitVSYNC();            
   00F6 CDr00r00      [17]  261 	call	_cpct_waitVSYNC
                            262 ;src/game.c:69: cpct_drawSolidBox(pvideomem, cpct_px2byteM1(1, 1, 1, 1), SPR_W, SPR_H);
   00F9 21 01 01      [10]  263 	ld	hl,#0x0101
   00FC E5            [11]  264 	push	hl
   00FD 2E 01         [ 7]  265 	ld	l, #0x01
   00FF E5            [11]  266 	push	hl
   0100 CDr00r00      [17]  267 	call	_cpct_px2byteM1
   0103 F1            [10]  268 	pop	af
   0104 F1            [10]  269 	pop	af
   0105 45            [ 4]  270 	ld	b,l
   0106 ED 5Br04r00   [20]  271 	ld	de,(_pvideomem)
   010A 21 04 10      [10]  272 	ld	hl,#0x1004
   010D E5            [11]  273 	push	hl
   010E C5            [11]  274 	push	bc
   010F 33            [ 6]  275 	inc	sp
   0110 D5            [11]  276 	push	de
   0111 CDr00r00      [17]  277 	call	_cpct_drawSolidBox
   0114 F1            [10]  278 	pop	af
   0115 F1            [10]  279 	pop	af
   0116 33            [ 6]  280 	inc	sp
                            281 ;src/game.c:70: updateUser();                
   0117 CDr3Br00      [17]  282 	call	_updateUser
                            283 ;src/game.c:71: drawAll();                   
   011A CDr88r00      [17]  284 	call	_drawAll
   011D 18 D2         [12]  285 	jr	00101$
                            286 	.area _CODE
                            287 	.area _INITIALIZER
                            288 	.area _CABS (ABS)
